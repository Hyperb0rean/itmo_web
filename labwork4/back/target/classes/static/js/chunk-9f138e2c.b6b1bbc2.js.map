{"version":3,"sources":["webpack:///./src/components/BoardAdmin.vue","webpack:///./src/services/admin.service.js","webpack:///./src/components/BoardAdmin.vue?4f25","webpack:///./src/components/BoardAdmin.vue?c162","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/services/auth-header.js"],"names":["class","role","style","isAdmin","users","user","key","id","email","username","roles","name","deleteUser","getAllUsers","API_URL","AdminService","axios","get","headers","authHeader","userId","delete","data","computed","currentUser","this","$store","state","auth","includes","mounted","$router","push","methods","getAll","then","response","catch","err","console","error","render","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","call","match","JSON","parse","localStorage","getItem","accessToken","Authorization"],"mappings":"0JACsBA,MAAM,O,EACxB,eAIM,OAJDA,MAAM,aAAW,CACpB,eAEM,OAFDA,MAAM,yBAAyBC,KAAK,QAAQC,MAAA,yBAA0B,mB,MAIxEF,MAAM,mC,GACFA,MAAM,cAAcE,MAAA,gB,EACzB,eAOQ,SAPDF,MAAM,eAAa,CACxB,eAKK,MALDE,MAAA,yBAAyB,CAC3B,eAAgB,UAAZ,WACJ,eAAc,UAAV,SACJ,eAAiB,UAAb,YACJ,eAAe,UAAX,c,mCAkBZ,eAA0C,UAAtC,qCAAiC,G,4EA/B5B,EAAAC,S,iBAAX,eA6BM,MA7BN,EA6BM,CA5BJ,EAKA,eAqBM,MArBN,EAqBM,CApBJ,eAmBQ,QAnBR,EAmBQ,CAlBN,EAQA,eASQ,e,mBARN,eAOK,2BAPc,EAAAC,OAAK,SAAbC,G,wBAAX,eAOK,MAPsBC,IAAKD,EAAML,MAAM,oBAAoBE,MAAA,yB,CAC9D,eAAsB,yBAAfG,EAAKE,IAAE,GACd,eAAyB,yBAAlBF,EAAKG,OAAK,GACjB,eAA4B,yBAArBH,EAAKI,UAAQ,GACQ,aAAlBJ,EAAKK,MAAK,GAAIC,M,iBAAxB,eACmD,QADN,eACC,UADQ,QAAK,mBAAE,EAAAC,WAAWP,EAAKE,KAAM,UAAO,+BAAE,EAAAM,gBAAeb,MAAM,iBAC7GE,MAAA,gBAAoB,gBAAa,oB,iBACrC,eAAkC,OAAvB,4B,qCAOT,EAAAC,Q,wCAAZ,eAEM,SADJ,M,qFC7BEW,EAAU,mCAEVC,E,4FACF,WACI,OAAOC,IAAMC,IAAIH,EAAQ,CAAEI,QAASC,qB,wBAGxC,SAAWC,GACP,OAAOJ,IAAMK,OAAOP,EAAWM,EAAQ,CAAEF,QAASC,uB,KAK3C,MAAIJ,EDwBJ,GACbJ,KAAM,QACNW,KAFa,WAGX,MAAO,CACLlB,MAAO,KAIXmB,SAAU,CACRC,YADQ,WAEN,OAAOC,KAAKC,OAAOC,MAAMC,KAAKvB,MAEhCF,QAJQ,WAKN,SAAIsB,KAAKD,cAAeC,KAAKD,YAAY,WAChCC,KAAKD,YAAY,SAASK,SAAS,gBAMhDC,QApBa,WAqBNL,KAAKD,aACRC,KAAKM,QAAQC,KAAK,UAEpBP,KAAKZ,eAEPoB,QAAS,CACPrB,WADO,SACIQ,GACT,EAAaR,WAAWQ,GACxBK,KAAKZ,eAGPA,YANO,WAMO,WACZ,EAAaqB,SAASC,MACpB,SAACC,GACC,EAAKhC,MAAQgC,EAASd,QAGvBe,OAAM,SAAAC,GAAE,OAAKC,QAAQC,MAAMF,S,UEzEpC,EAAOG,OAASA,EAED,gB,oCCPf,W,4CCAA,IAAIC,EAAc,EAAQ,QACtBC,EAAiB,EAAQ,QAAuCC,EAEhEC,EAAoBC,SAASC,UAC7BC,EAA4BH,EAAkBI,SAC9CC,EAAS,wBACTC,EAAO,OAIPT,KAAiBS,KAAQN,IAC3BF,EAAeE,EAAmBM,EAAM,CACtCC,cAAc,EACdnC,IAAK,WACH,IACE,OAAO+B,EAA0BK,KAAK5B,MAAM6B,MAAMJ,GAAQ,GAC1D,MAAOV,GACP,MAAO,Q,kCCjBA,SAASrB,IACtB,IAAId,EAAOkD,KAAKC,MAAMC,aAAaC,QAAQ,SAE3C,OAAIrD,GAAQA,EAAKsD,YACR,CAAEC,cAAe,UAAYvD,EAAKsD,aAElC,GANX","file":"js/chunk-9f138e2c.b6b1bbc2.js","sourcesContent":["<template>\n  <div v-if=\"isAdmin\" class=\"all\">\n    <div class=\"container\">\n      <div class=\"alert alert-info admin\" role=\"alert\" style=\"text-align:center\">\n        Admin panel\n      </div>\n    </div>\n    <div class=\"table-responsive table-bordered\">\n      <table class=\"table-hover\" style=\"width: 100%\">\n        <thead class=\"thead-light\">\n          <tr style=\"text-align:center\">\n            <th>User id</th>\n            <th>Email</th>\n            <th>Username</th>\n            <th>Delete</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"user in users\" :key=\"user\" class=\"res-table-column;\" style=\"text-align:center\">\n            <td>{{ user.id }}</td>\n            <td>{{ user.email }}</td>\n            <td>{{ user.username }}</td>\n            <td v-if=\"user.roles[0].name == 'ROLE_USER'\"><button @click=\"deleteUser(user.id)\" @mouseup=\"getAllUsers()\" class=\"btn btn-danger\"\n                style=\"width: 100%\">Delete person</button></td>\n            <td v-else>Can't delete admin</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n  </div>\n  <div v-if=\"!isAdmin\">\n    <h1>sorry bro this is admin-only club</h1>\n  </div>\n\n</template>\n\n<script>\nimport AdminService from \"../services/admin.service\";\n\nexport default {\n  name: \"Admin\",\n  data() {\n    return {\n      users: []\n\n    };\n  },\n  computed: {\n    currentUser() {\n      return this.$store.state.auth.user;\n    },\n    isAdmin() {\n      if (this.currentUser && this.currentUser['roles']) {\n        return this.currentUser['roles'].includes('ROLE_ADMIN');\n      }\n\n      return false;\n    }\n  },\n  mounted() {\n    if (!this.currentUser) {\n      this.$router.push('/login');\n    }\n    this.getAllUsers();\n  },\n  methods: {\n    deleteUser(userId) {\n      AdminService.deleteUser(userId);\n      this.getAllUsers();\n    },\n\n    getAllUsers() {\n      AdminService.getAll().then(\n        (response) => {\n          this.users = response.data;\n        }\n      )\n        .catch(err => console.error(err))\n    }\n  }\n};\n</script>\n\n<style>\ntd {\n  padding: 5px 5px 5px 5px;\n}\n\n.admin {\n  margin-top: 20px;\n}\n</style>\n","import axios from 'axios';\nimport authHeader from './auth-header';\n\nconst API_URL = 'http://localhost:1337/api/admin/';\n\nclass AdminService{\n    getAll() {\n        return axios.get(API_URL,{ headers: authHeader() });\n    }\n\n    deleteUser(userId) {\n        return axios.delete(API_URL  + userId, { headers: authHeader() });\n    }\n\n\n}\nexport default new AdminService();","import { render } from \"./BoardAdmin.vue?vue&type=template&id=9b8cb84e\"\nimport script from \"./BoardAdmin.vue?vue&type=script&lang=js\"\nexport * from \"./BoardAdmin.vue?vue&type=script&lang=js\"\n\nimport \"./BoardAdmin.vue?vue&type=style&index=0&id=9b8cb84e&lang=css\"\nscript.render = render\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./BoardAdmin.vue?vue&type=style&index=0&id=9b8cb84e&lang=css\"","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","export default function authHeader() {\n  let user = JSON.parse(localStorage.getItem('user'));\n\n  if (user && user.accessToken) {\n    return { Authorization: 'Bearer ' + user.accessToken};\n  } else {\n    return {};\n  }\n}\n"],"sourceRoot":""}