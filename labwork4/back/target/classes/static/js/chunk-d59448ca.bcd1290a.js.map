{"version":3,"sources":["webpack:///./src/components/Profile.vue?e547","webpack:///./src/components/Profile.vue","webpack:///./src/components/Profile.vue?ae91","webpack:///./src/services/point.service.js","webpack:///./src/services/auth-header.js"],"names":["class","role","style","alt","currentUser","username","id","email","roles","points","length","type","deletePoints","name","data","computed","this","$store","state","auth","user","methods","getPoints","getAll","then","response","catch","err","console","error","deleteAll","mounted","$router","push","render","API_URL","PointService","axios","get","headers","authHeader","post","delete","JSON","parse","localStorage","getItem","accessToken","Authorization"],"mappings":"gHAAA,W,oECC0BA,MAAM,a,GACvBA,MAAM,2BAA2BC,KAAK,QAAQC,MAAA,yB,iBACN,a,GAExCA,MAAA,oD,GAEGF,MAAM,aAAaE,MAAA,uB,GACjBF,MAAM,6C,EACR,eAAyB,cAAjB,YAAQ,G,GACVA,MAAM,iC,GAEVA,MAAM,6C,EACR,eAA4B,cAApB,eAAW,G,GACbA,MAAM,iC,GAEVA,MAAM,6C,EACR,eAAkC,cAA1B,qBAAiB,G,GACnBA,MAAM,iC,GAEVA,MAAM,6C,EACR,eAAuC,cAA/B,0BAAsB,G,GACxBA,MAAM,iC,iBACiE,Y,EAAQ,eAAoB,cAAZ,OAAG,G,iBAAS,gB,EAM/G,eAKM,OALDA,MAAM,OAAOE,MAAA,e,CAChB,eAA6F,OAAxFF,MAAM,0BAA0BG,IAAI,iBAAiBD,MAAA,gCAC1D,eAEM,OAFDF,MAAM,aAAW,CACpB,eAA+D,KAA5DA,MAAM,aAAY,8C,kCA/BlB,EAAAI,a,iBAAX,eAmCM,MAnCN,EAmCM,CAlCJ,eAEM,MAFN,EAEM,CADJ,eAA2C,6BAAhC,EAAAA,YAAYC,UAAQ,G,IAEjC,eA8BM,MA9BN,EA8BM,CA7BJ,eAsBM,YArBJ,eAoBK,KApBL,EAoBK,CAnBH,eAGK,KAHL,EAGK,CAFH,EACA,eAAuE,OAAvE,EAAuE,eAAxB,EAAAD,YAAYE,IAAE,KAE/D,eAGK,KAHL,EAGK,CAFH,EACA,eAA0E,OAA1E,EAA0E,eAA3B,EAAAF,YAAYG,OAAK,KAElE,eAGK,KAHL,EAGK,CAFH,EACA,eAA6E,OAA7E,EAA6E,eAA9B,EAAAH,YAAYI,MAAK,SAElE,eAMK,KANL,EAMK,CALH,EACA,eAAsE,OAAtE,EAAsE,eAAvB,EAAAC,OAAOC,QAAM,GAC5D,eAEiB,UAFTC,KAAK,SAASX,MAAM,yBAA0B,QAAK,+BAAE,EAAAY,kB,GAAwB,E,UAM3F,O,sCAcS,GACbC,KAAM,UACNC,KAFa,WAGX,MAAO,CACLL,OAAQ,KAGZM,SAAU,CACRX,YADQ,WAEN,OAAOY,KAAKC,OAAOC,MAAMC,KAAKC,OAGlCC,QAAS,CACPC,UADO,WACK,WACV,OAAaC,SACVC,MAAK,SAAAC,GACJ,EAAKhB,OAASgB,EAASX,QAExBY,OAAM,SAAAC,GAAE,OAAKC,QAAQC,MAAMF,OAEhCf,aARO,WASL,OAAakB,YACbd,KAAKP,OAAS,KAGlBsB,QAzBa,WA0BNf,KAAKZ,aACRY,KAAKgB,QAAQC,KAAK,UAEpBjB,KAAKM,c,UCnET,EAAOY,OAASA,EAED,gB,wHCJTC,EAAU,oCAEVC,E,4FACF,WACI,OAAOC,IAAMC,IAAIH,EAAU,GAAG,CAAEI,QAASC,qB,uBAG7C,SAAU1B,GACN,OAAOuB,IAAMI,KAAKN,EAASrB,EAAM,CAAEyB,QAASC,qB,uBAGhD,WACI,OAAOH,IAAMK,OAAOP,EAAS,CAACI,QAASC,uB,KAGhC,WAAIJ,G,kCClBJ,SAASI,IACtB,IAAIpB,EAAOuB,KAAKC,MAAMC,aAAaC,QAAQ,SAE3C,OAAI1B,GAAQA,EAAK2B,YACR,CAAEC,cAAe,UAAY5B,EAAK2B,aAElC,GANX","file":"js/chunk-d59448ca.bcd1290a.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Profile.vue?vue&type=style&index=0&id=705fdfac&lang=css\"","<template>\n  <div v-if=\"currentUser\" class=\"container\">\n    <div class=\"alert alert-danger admin\" role=\"alert\" style=\"text-align:center\">\n      <strong>{{ currentUser.username }}</strong> Profile\n    </div>\n    <div style=\"display:flex;justify-content: space-between;\">\n      <div>\n        <ul class=\"list-group\" style=\"width:fit-content\">\n          <li class=\"list-group-item d-flex align-items-center\">\n            <strong>Your id:</strong>\n            <span class=\"badge badge-danger badge-pill\">{{ currentUser.id }}</span>\n          </li>\n          <li class=\"list-group-item d-flex align-items-center\">\n            <strong>Your email:</strong>\n            <span class=\"badge badge-danger badge-pill\">{{ currentUser.email }}</span>\n          </li>\n          <li class=\"list-group-item d-flex align-items-center\">\n            <strong>Your authorities:</strong>\n            <span class=\"badge badge-danger badge-pill\">{{ currentUser.roles[0] }}</span>\n          </li>\n          <li class=\"list-group-item d-flex align-items-center\">\n            <strong>Number of your points:</strong>\n            <span class=\"badge badge-danger badge-pill\">{{ points.length }}</span>\n            <button type=\"button\" class=\"btn btn-outline-danger\" @click=\"deletePoints()\"> Delete <strong>all</strong>\n              your\n              points</button>\n          </li>\n        </ul>\n      </div>\n      <div class=\"card\" style=\"width:40%;\">\n        <img class=\"card-img-top prof_image\" alt=\"Card image cap\" style=\"width:100%; height: 100px;\">\n        <div class=\"card-body\">\n          <p class=\"card-text\">Social Credit game. Good luck comrade!</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport pointService from '../services/point.service';\n\nexport default {\n  name: 'Profile',\n  data() {\n    return {\n      points: []\n    }\n  },\n  computed: {\n    currentUser() {\n      return this.$store.state.auth.user;\n    }\n  },\n  methods: {\n    getPoints() {\n      pointService.getAll()\n        .then(response => {\n          this.points = response.data;\n        })\n        .catch(err => console.error(err))\n    },\n    deletePoints() {\n      pointService.deleteAll();\n      this.points = [];\n    }\n  },\n  mounted() {\n    if (!this.currentUser) {\n      this.$router.push('/login');\n    }\n    this.getPoints();\n  }\n};\n</script>\n\n<style>\n.list-group span {\n  margin-left: 10px;\n}\n\n.list-group button {\n  margin-left: 10px;\n}\n\n@media only screen and (max-width: 738px) {\n  .prof_image {\n    content: url(\"../../assets/idol_big.gif\")\n  }\n}\n\n@media only screen and (min-width: 739px) and (max-width:1039px) {\n  .prof_image {\n    content: url(\"../../assets/rock_big.gif\")\n  }\n}\n\n@media only screen and (min-width: 1040px) {\n  .prof_image {\n    content: url(\"../../assets/mao.jpg\")\n  }\n}\n</style>","import { render } from \"./Profile.vue?vue&type=template&id=705fdfac\"\nimport script from \"./Profile.vue?vue&type=script&lang=js\"\nexport * from \"./Profile.vue?vue&type=script&lang=js\"\n\nimport \"./Profile.vue?vue&type=style&index=0&id=705fdfac&lang=css\"\nscript.render = render\n\nexport default script","import axios from 'axios';\nimport authHeader from './auth-header';\n\nconst API_URL = 'http://localhost:1337/api/points/';\n\nclass PointService{\n    getAll() {\n        return axios.get(API_URL + '',{ headers: authHeader() });\n    }\n\n    savePoint(data) {\n        return axios.post(API_URL, data, { headers: authHeader() });\n    }\n\n    deleteAll() {\n        return axios.delete(API_URL, {headers: authHeader()});\n    }\n}\nexport default new PointService();","export default function authHeader() {\n  let user = JSON.parse(localStorage.getItem('user'));\n\n  if (user && user.accessToken) {\n    return { Authorization: 'Bearer ' + user.accessToken};\n  } else {\n    return {};\n  }\n}\n"],"sourceRoot":""}