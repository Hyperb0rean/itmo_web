(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9f138e2c"],{5535:function(e,t,n){"use strict";n.r(t);n("b0c0");var c=n("7a23"),r={key:0,class:"all"},s=Object(c["g"])("div",{class:"container"},[Object(c["g"])("div",{class:"alert alert-info admin",role:"alert",style:{"text-align":"center"}}," Admin panel ")],-1),l={class:"table-responsive table-bordered"},a={class:"table-hover",style:{width:"100%"}},i=Object(c["g"])("thead",{class:"thead-light"},[Object(c["g"])("tr",{style:{"text-align":"center"}},[Object(c["g"])("th",null,"User id"),Object(c["g"])("th",null,"Email"),Object(c["g"])("th",null,"Username"),Object(c["g"])("th",null,"Delete")])],-1),u={key:0},o={key:1},b={key:1},d=Object(c["g"])("h1",null,"sorry bro this is admin-only club",-1);function O(e,t,n,O,j,h){return Object(c["s"])(),Object(c["d"])(c["a"],null,[h.isAdmin?(Object(c["s"])(),Object(c["d"])("div",r,[s,Object(c["g"])("div",l,[Object(c["g"])("table",a,[i,Object(c["g"])("tbody",null,[(Object(c["s"])(!0),Object(c["d"])(c["a"],null,Object(c["y"])(j.users,(function(e){return Object(c["s"])(),Object(c["d"])("tr",{key:e,class:"res-table-column;",style:{"text-align":"center"}},[Object(c["g"])("td",null,Object(c["C"])(e.id),1),Object(c["g"])("td",null,Object(c["C"])(e.email),1),Object(c["g"])("td",null,Object(c["C"])(e.username),1),"ROLE_USER"==e.roles[0].name?(Object(c["s"])(),Object(c["d"])("td",u,[Object(c["g"])("button",{onClick:function(t){return h.deleteUser(e.id)},onMouseup:t[1]||(t[1]=function(e){return h.getAllUsers()}),class:"btn btn-danger",style:{width:"100%"}},"Delete person",40,["onClick"])])):(Object(c["s"])(),Object(c["d"])("td",o,"Can't delete admin"))])})),128))])])])])):Object(c["e"])("",!0),h.isAdmin?Object(c["e"])("",!0):(Object(c["s"])(),Object(c["d"])("div",b,[d]))],64)}n("caad"),n("2532");var j=n("d4ec"),h=n("bee2"),g=n("bc3a"),f=n.n(g),m=n("c4c6"),y="http://localhost:1337/api/admin/",p=function(){function e(){Object(j["a"])(this,e)}return Object(h["a"])(e,[{key:"getAll",value:function(){return f.a.get(y,{headers:Object(m["a"])()})}},{key:"deleteUser",value:function(e){return f.a.delete(y+e,{headers:Object(m["a"])()})}}]),e}(),U=new p,k={name:"Admin",data:function(){return{users:[]}},computed:{currentUser:function(){return this.$store.state.auth.user},isAdmin:function(){return!(!this.currentUser||!this.currentUser["roles"])&&this.currentUser["roles"].includes("ROLE_ADMIN")}},mounted:function(){this.currentUser||this.$router.push("/login"),this.getAllUsers()},methods:{deleteUser:function(e){U.deleteUser(e),this.getAllUsers()},getAllUsers:function(){var e=this;U.getAll().then((function(t){e.users=t.data})).catch((function(e){return console.error(e)}))}}};n("59ab");k.render=O;t["default"]=k},"59ab":function(e,t,n){"use strict";n("9503")},9503:function(e,t,n){},b0c0:function(e,t,n){var c=n("83ab"),r=n("9bf2").f,s=Function.prototype,l=s.toString,a=/^\s*function ([^ (]*)/,i="name";c&&!(i in s)&&r(s,i,{configurable:!0,get:function(){try{return l.call(this).match(a)[1]}catch(e){return""}}})},c4c6:function(e,t,n){"use strict";function c(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{Authorization:"Bearer "+e.accessToken}:{}}n.d(t,"a",(function(){return c}))}}]);
//# sourceMappingURL=chunk-9f138e2c.b6b1bbc2.js.map